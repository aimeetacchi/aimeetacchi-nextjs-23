import Head from 'next/head'
import Image from 'next/image'

import picOne from '../public/images/pic1.png'
import picTwo from '../public/images/pic2.png'
import picThree from '../public/images/pic4.png'
import { FaGithubAlt,  } from 'react-icons/fa';

import { datoCmsQuery } from '../src/querys/datoCmsQuery';
import datoCmsClient from '../dato-cms';

import { githubQuery } from '../src/querys/gitHubQuery';
import gitHubClient from '../github';

import { HomeStyle } from '../styles/styles';

import Layout from '../src/components/Layout';
import About from '../src/components/About';
import Github from '../src/components/GitHub';
import Project from '../src/components/Project';

import P from '../src/components/UI/Typography/Paragraph';
import H2 from '../src/components/UI/Typography/H2'
import { personalDetails } from '../src/Details';
import { RevealWrapper } from 'next-reveal'

interface ProjectsProps {
  allProjects: {
    allProjects: [],
  };
  pinnedRepoItems: [];
}

export default function Home({ allProjects, pinnedRepoItems } : ProjectsProps) {

  console.log('All Projects', allProjects);

  return (
    <>
      <Head>
        <title>Aimee Tacchi Portfolio 2023</title>
        <meta name="description" content="Aimee Tacchi Portfolio 2023 Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <Layout>
      <HomeStyle>


     
        <div className="home-welcome">
          <div className="flex-container">

            <div className="home-intro">
               
              <RevealWrapper origin='bottom' delay={250} duration={1500} distance='800px' viewOffset={{top:  25,  right:0,  bottom:  10,  left:25}}>
                <H2 className="home-title">{personalDetails.tagline}</H2>
              </RevealWrapper>

              <RevealWrapper origin={'bottom'} delay={280} duration={1500} distance='1000px' viewOffset={{top:  25,  right:0,  bottom:  10,  left:25}}>
                <P className="font-oswald500sans text-xl">{personalDetails.subText}</P>
            
                <small className="block mt-2 font-oswald500sans text-xl">You can find some of my latest work below. <FaGithubAlt className="inline-block"/></small>

              </RevealWrapper>
              
            </div>

            <RevealWrapper className="home-picture" origin='bottom' delay={650} duration={1500} distance='800px' viewOffset={{top:  25,  right:0,  bottom:  10,  left:25}}>
              <Image src={picOne} alt='aimee tacchi'/>
            
              <Image src={picTwo} alt="developer laptop" />
            
              <Image src={picThree} alt="developer laptop" />
            </RevealWrapper>

          </div>
        </div>

        <About/>

        <Github pinnedRepoItems={pinnedRepoItems}/>

        { allProjects && (
            <>
              <RevealWrapper origin='bottom' delay={250} duration={1500} distance='800px' viewOffset={{top:  25,  right:0,  bottom:  10,  left:25}}>
                <H2 className="text-center">Latest work</H2>
              </RevealWrapper>
                {
                  allProjects.allProjects.map((project: any, index: number) => (
                    project.recentWork ?
                      <Project key={project.id} project={project} index={index} /> : null
                    
                  ))
                }

            </>
          )}
      </HomeStyle>
      </Layout>
    </>
  )
}





export async function getStaticProps() {

    const allProjects = await datoCmsClient.request(datoCmsQuery);
    const gitHubData = await gitHubClient.request(githubQuery)

    const { user } = gitHubData;
    const pinnedRepoItems = user.pinnedItems.edges.map((edge: any) => edge.node);

    return {
        props: {allProjects, pinnedRepoItems},
        revalidate: 1,
    };
}
